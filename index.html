<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KONSTLABB</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Header Section -->
  <header>
    <div class="headCont">
      <!-- Logo -->
      <div class="logo">KonstLabb</div>

      <!-- Write & Indicators -->
      <div class="processCont">
        <button id="writeBtn">Write</button>
        <button id="restoreBtn">Restore</button>
        <button id="processBtn">Process</button>
      </div>

      <div class="processedGrid">
        <div class="indicator" id="effectX"></div>
        <div class="indicator" id="effectY"></div>
      </div>

      <!-- File Actions -->
      <div class="fileActions">
        <div class="fileCont">
          <input type="file" id="imageUpload" accept="image/*" />
        </div>
        <input type="text" id="fileName" placeholder="Enter filename" />
        <button id="saveBtn">Save File</button>
      </div>

      <!-- Mode Toggle -->
      <div class="modeToggle">
        <label for="modeSwitch">Mode:</label>
        <select id="modeSwitch">
          <option value="raster">Raster (PNG)</option>
          <option value="svg">Vector (SVG)</option>
        </select>
      </div>
    </div>
  </header>

  <!-- Main Content Section -->
  <main>
    <!-- Left Sidebar for Macro Grid and expansions -->
    <aside class="leftSidebar">
      <details open>
        <summary>Macros</summary>
        <nav class="nav-grid">
          <button id="macro1">X</button>
          <button id="macro2">Y</button>
          <button id="macro3">PrimeX</button>
          <button id="macro4">ColorShift</button>
          <button id="macro5">BezierX</button>
          <button id="macro6">SVG Warp</button>
          <button id="macro7">EdgeDetect</button>
          <button id="macro8">OffsetSum</button>
          <button id="macro9">OffsetDiff</button>
          <button id="macro10">Double</button>
          <button id="macro11">QuadTree</button>
          <button id="macro12">BezierY</button>
          <button id="macro13">13</button>
          <button id="macro14">14</button>
          <button id="macro15">15</button>
        </nav>
      </details>
    </aside>

    <!-- Main container (canvas & svg) -->
    <div class="container">
      <!-- A wrapper to hold the canvas & axis nodes in position: relative. -->
      <div class="canvasWrapper">
        <canvas id="canvas"></canvas>
        <!-- Draggable axis nodes -->
        <div id="xNode" class="axisNode">
          <div class="axisHandle xHandle"></div>
        </div>
        <div id="yNode" class="axisNode">
          <div class="axisHandle yHandle"></div>
        </div>
      </div>

      <!-- Our SVG container for vector mode -->
      <svg id="svgContainer" width="800" height="800" viewBox="0 0 800 800" style="display: none;">
        <path id="svgPath" d="M 100 400 Q 400 100 700 400 T 1300 400"
              stroke="white" fill="none" stroke-width="2" />
      </svg>
    </div>

    <!-- Right Sidebar with Advanced Controls -->
    <aside class="sidebar">
      <details open>
        <summary>Advanced Controls</summary>
        <div class="controls-content">
          <p>Selected Macro: <span id="macroName">None</span></p>

          <label for="primeOffset">Prime Offset: <span id="primeVal">5</span></label>
          <input type="range" id="primeOffset" min="1" max="100" value="5" />

          <label for="bezierIntensity">Bezier Intensity: <span id="bezierVal">25</span></label>
          <input type="range" id="bezierIntensity" min="1" max="500" value="25" />

          <!-- NEW: QuadTree Resolution Slider -->
          <label for="quadTreeDepth">QuadTree Resolution: <span id="quadTreeVal">6</span></label>
          <input type="range" id="quadTreeDepth" min="1" max="10" value="6" />

          <!-- NEW: Edge Modulus Slider (used by EdgeDetect) -->
          <label for="edgeModulus">Edge Modulus: <span id="edgeModVal">80</span></label>
          <input type="range" id="edgeModulus" min="1" max="255" value="80" />

          <label for="colorShift">Color Shift:</label>
          <input type="checkbox" id="colorShift" />
        </div>
      </details>

      <div class="toolDisplay">
        <label for="toggleAxisOverlay">
          <div class="toolTitle">Tools</div>
          <input type="checkbox" id="toggleAxisOverlay" checked />
          X/Y
        </label>
      </div>

      <!-- We'll show region results from "EdgeDetect" here if desired -->
      <details id="regionDetails" style="display: none;">
        <summary>Detected Regions</summary>
        <div id="regionList" class="controls-content">
          <!-- Populated in script.js -->
        </div>
      </details>
    </aside>
  </main>

  <!-- Footer Section -->
  <footer>
    <p>Â© 2025 RDXENV</p>
    <p class="credit">Roderick Shoolbraid</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
